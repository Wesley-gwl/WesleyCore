var advancedSearch={openDialog:function(n,t){var u=$("#dlg_advsearch"),i,r;u[0]||(i='<div id="dlg_advsearch" style="width:600px;height:400px;"><form id= "form_advsearch" style= "width:100%; height:100%;" ><table id="dg_advsearch" style="width:100%; height:100%;"><\/table><div id="btn_advsearch"><a href="javascript:;" class="btn btn-primary" onclick="advancedSearch.addprop()"><i class="fa fa-plus-circle"><\/i>添加<\/a> <a href="javascript:;" class="btn btn-primary" onclick="advancedSearch.clearprop()"><i class="fa fa-trash"><\/i>清空<\/a> <a href="javascript:;" class="btn btn-primary" onclick="advancedSearch.doSearch('+t+')"><i class="fa fa-check"><\/i>确定<\/a> <a href="javascript:;" class="btn btn-primary" onclick="advancedSearch.closeDialog()"><i class="fa fa-ban"><\/i>取消<\/a> <\/div><\/form><\/div>',$("body>div:last").after(i),$("#dlg_advsearch").dialog({title:"高级检索",closed:!0,closable:!1,cache:!1,modal:!0,buttons:"#btn_advsearch"}),r=[{id:"contains",text:"包含"},{id:"==",text:"等于"},{id:"!=",text:"不等于"},{id:">",text:"大于"},{id:">=",text:"大于等于"},{id:"<",text:"小于"},{id:"<=",text:"小于等于"}],$("#dg_advsearch").datagrid({noheader:!0,rownumbers:!0,fit:!0,fitColumns:!0,nowrap:!0,striped:!0,singleSelect:!0,autoRowHeight:!1,columns:[[{field:"relation",title:"关系",width:150,align:"center",editor:{type:"combobox",options:{data:[{id:"AND",text:"并且"},{id:"OR",text:"或者"}],valueField:"id",textField:"text",editable:!1}}},{field:"property",title:"字段名",width:280,align:"center",editor:{type:"combobox",options:{data:n,valueField:"id",textField:"text",editable:!1,required:!0}}},{field:"condition",title:"条件",width:220,align:"center",editor:{type:"combobox",options:{data:r,valueField:"id",textField:"text",editable:!1,required:!0}}},{field:"searchvalue",title:"值",width:400,align:"center",editor:{type:"textbox",options:{required:!0}}},{field:"rmv",title:"移除",width:150,align:"center"}]]}));$("#dlg_advsearch").dialog("open")},addprop:function(){var n,t;$("#dg_advsearch").datagrid("appendRow",{property:"",condition:"",searchvalue:"",relation:"",rmv:'<a href="javascript:;"  onclick="advancedSearch.delprop(this)"><i class="fa fa-minus-circle" style="color:#e7505a"><\/i><\/a>'});n=$("#dg_advsearch").datagrid("getRows").length-1;$("#dg_advsearch").datagrid("beginEdit",n);t=$("#dg_advsearch").datagrid("getEditor",{index:n,field:"condition"});t.target.combobox("setValue","contains")},delprop:function(n){$(n.parentNode).click();var t=$("#dg_advsearch").datagrid("getSelected"),i=$("#dg_advsearch").datagrid("getRowIndex",t);$("#dg_advsearch").datagrid("deleteRow",i)},clearprop:function(){$("#dg_advsearch").datagrid("loadData",[])},doSearch:function(n){var u,f,i,e;if($("#form_advsearch").form("validate")){for(u=$("#dg_advsearch").datagrid("getRows"),f=[],i=0;i<u.length;i++){var r=$("#dg_advsearch").datagrid("getRowIndex",u[i]),o=$("#dg_advsearch").datagrid("getEditor",{index:r,field:"relation"}),s=o.target.combobox("getValue"),h=$("#dg_advsearch").datagrid("getEditor",{index:r,field:"property"}),c=h.target.combobox("getValue"),l=$("#dg_advsearch").datagrid("getEditor",{index:r,field:"condition"}),a=l.target.combobox("getValue"),v=$("#dg_advsearch").datagrid("getEditor",{index:r,field:"searchvalue"}),y=v.target.textbox("getText"),t={};t.Relation=s;t.Property=c;t.Condition=a;t.SearchValue=y;f.push(t)}e=JSON.stringify(f);$("#dlg_advsearch").dialog("close");n(e)}},closeDialog:function(){$("#dlg_advsearch").dialog("close")}};